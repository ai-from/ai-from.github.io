(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-515d8548"],{1071:function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"edit indent"},[o("vEdit")],1)},i=[],n=o("5530"),s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"v-edit"},[t.isEditMode?[o("div",{staticClass:"title"},[t._v(t._s(this.title))]),t.localNote?o("div",{staticClass:"form"},[o("div",{staticClass:"head"},[o("label",[t._v("Заголовок")]),o("div",{staticClass:"wrap"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.localNote.title,expression:"localNote.title"}],attrs:{type:"text",placeholder:"Введите название"},domProps:{value:t.localNote.title},on:{input:[function(e){e.target.composing||t.$set(t.localNote,"title",e.target.value)},t.changeEndState]}}),o("v-icon",{staticClass:"icon undoItem",attrs:{name:"undo-alt",title:"Отменить"},on:{click:t.undoTitle}}),o("v-icon",{staticClass:"icon redoItem",attrs:{name:"redo-alt",title:"Вернуть"},on:{click:t.redoTitle}})],1)]),t._v(" "),o("div",{staticClass:"content"},[o("div",{staticClass:"title"},[t._v("Планы")]),o("div",{staticClass:"items"},t._l(t.localNote.todos,(function(e,a){return o("div",{key:a,staticClass:"item"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"todo.name"}],attrs:{type:"text",placeholder:"Введите название"},domProps:{value:e.name},on:{input:[function(o){o.target.composing||t.$set(e,"name",o.target.value)},t.changeEndState]}}),o("v-icon",{staticClass:"icon undoItem",attrs:{name:"undo-alt",title:"Отменить"},on:{click:function(e){return t.undoItem(a)}}}),o("v-icon",{staticClass:"icon redoItem",attrs:{name:"redo-alt",title:"Вернуть"},on:{click:function(e){return t.redoItem(a)}}}),o("input",{directives:[{name:"model",rawName:"v-model",value:e.checked,expression:"todo.checked"}],attrs:{type:"checkbox"},domProps:{checked:e.checked,checked:Array.isArray(e.checked)?t._i(e.checked,null)>-1:e.checked},on:{change:function(o){var a=e.checked,i=o.target,n=!!i.checked;if(Array.isArray(a)){var s=null,c=t._i(a,s);i.checked?c<0&&t.$set(e,"checked",a.concat([s])):c>-1&&t.$set(e,"checked",a.slice(0,c).concat(a.slice(c+1)))}else t.$set(e,"checked",n)}}}),o("v-icon",{staticClass:"icon removeItem",attrs:{name:"times",title:"Удалить"},on:{click:function(e){return t.deleteTodo(a)}}})],1)})),0),t._v(" "),o("div",{staticClass:"buttons"},[o("v-button",{staticClass:"addTodo",attrs:{title:"Добавить",icon:"plus"},on:{btnclick:t.addTodo}}),o("v-button",{staticClass:"saveNote",attrs:{title:"Сохранить",icon:"check"},on:{btnclick:t.saveNote}}),o("v-button",{staticClass:"cancelChanges",attrs:{title:"Отмена",icon:"times",type:"cancel"},on:{btnclick:t.cancelChanges}}),o("v-button",{staticClass:"deleteNote",attrs:{title:"Удалить",icon:"times",type:"error"},on:{btnclick:t.deleteNote}})],1)])]):[o("p",{staticClass:"notification"},[t._v("Заметка успешно удалена")])]]:[o("p",{staticClass:"notification"},[t._v("Выберите заметку для редактирования")])]],2)},c=[],l=(o("a434"),o("b0c0"),o("2aa4")),d=o("2f62"),r=o("ebc8"),u=o("306c"),h={name:"v-edit",data:function(){return{title:"Редактирование заметки",localNote:null}},mixins:[r["a"],u["a"]],components:{vCreate:l["a"]},computed:Object(n["a"])({},Object(d["c"])({isEditMode:function(t){return t.mNotes.isEditMode},editingNote:function(t){return t.mNotes.editingNote},notes:function(t){return t.mNotes.notes},updateLocalNote:function(t){return t.mModal.updateLocalNote}})),methods:Object(n["a"])({},Object(d["b"])(["UPDATE_NOTE","SHOW_MODAL"]),{refreshEndState:function(){var t=JSON.stringify(this.localNote);localStorage.setItem("endState",t)},addTodo:function(){this.localNote.todos.push({name:"",checked:!1}),this.refreshEndState();var t=JSON.parse(localStorage.getItem("middleState"));t.todos.push({name:"",checked:!1}),localStorage.setItem("middleState",JSON.stringify(t))},deleteTodo:function(t){this.localNote.todos.splice(t,1),this.refreshEndState();var e=JSON.parse(localStorage.getItem("middleState"));e.todos.splice(t,1),localStorage.setItem("middleState",JSON.stringify(e))},saveNote:function(){if(this.localNote.title.length>0){this.removeEmptyFields(this.localNote.todos),this.UPDATE_NOTE(this.localNote),localStorage.clear();var t=JSON.stringify(this.localNote);localStorage.setItem("startState",t),this.updateDatabase(),this.$router.push({name:"home"})}},deleteNote:function(){this.SHOW_MODAL({mode:"deleteNote",obj:this.localNote})},cancelChanges:function(){this.SHOW_MODAL({mode:"cancelChanges",obj:this.localNote})},changeEndState:function(){var t=JSON.stringify(this.localNote);localStorage.setItem("endState",t)},undoTitle:function(){this.middleState=JSON.parse(localStorage.getItem("middleState")),this.localNote.title=this.middleState.title},redoTitle:function(){this.endState=JSON.parse(localStorage.getItem("endState")),this.localNote.title=this.endState.title},undoItem:function(t){this.middleState=JSON.parse(localStorage.getItem("middleState")),this.localNote.todos[t].name=this.middleState.todos[t].name},redoItem:function(t){this.endState=JSON.parse(localStorage.getItem("endState")),this.localNote.todos[t].name=this.endState.todos[t].name}}),mounted:function(){this.localNote=this.editingNote},watch:{updateLocalNote:function(){this.localNote=JSON.parse(localStorage.getItem("startState"))}}},m=h,v=(o("fd86"),o("2877")),f=Object(v["a"])(m,s,c,!1,null,"48e24277",null),N=f.exports,p={name:"Edit",components:{vEdit:N},methods:Object(n["a"])({},Object(d["b"])(["UPDATE_NOTE"])),beforeRouteLeave:function(t,e,o){var a=JSON.parse(localStorage.getItem("startState"));a?(this.UPDATE_NOTE(a),o()):o()}},S=p,g=Object(v["a"])(S,a,i,!1,null,"763ad1be",null);e["default"]=g.exports},"153f":function(t,e,o){},"216c":function(t,e,o){},"2aa4":function(t,e,o){"use strict";var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"v-create"},[o("div",{staticClass:"title"},[t._v(t._s(this.title))]),o("div",{staticClass:"form"},[o("div",{staticClass:"head"},[o("label",[t._v("Заголовок")]),o("div",{staticClass:"wrap"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.newNote.title,expression:"newNote.title"}],attrs:{type:"text",placeholder:"Введите название"},domProps:{value:t.newNote.title},on:{input:[function(e){e.target.composing||t.$set(t.newNote,"title",e.target.value)},t.changeEndState]}}),o("v-icon",{staticClass:"icon undoItem",attrs:{name:"undo-alt",title:"Отменить"},on:{click:t.undoTitle}}),o("v-icon",{staticClass:"icon redoItem",attrs:{name:"redo-alt",title:"Вернуть"},on:{click:t.redoTitle}})],1)]),t._v(" "),o("div",{staticClass:"content"},[o("div",{staticClass:"title"},[t._v("Планы")]),o("div",{staticClass:"items"},t._l(t.newNote.todos,(function(e,a){return o("div",{key:a,staticClass:"item"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"todo.name"}],attrs:{type:"text",placeholder:"Введите название"},domProps:{value:e.name},on:{input:[function(o){o.target.composing||t.$set(e,"name",o.target.value)},t.changeEndState]}}),o("v-icon",{staticClass:"icon undoItem",attrs:{name:"undo-alt",title:"Отменить"},on:{click:function(e){return t.undoItem(a)}}}),o("v-icon",{staticClass:"icon redoItem",attrs:{name:"redo-alt",title:"Вернуть"},on:{click:function(e){return t.redoItem(a)}}}),o("input",{directives:[{name:"model",rawName:"v-model",value:e.checked,expression:"todo.checked"}],attrs:{type:"checkbox"},domProps:{checked:e.checked,checked:Array.isArray(e.checked)?t._i(e.checked,null)>-1:e.checked},on:{change:function(o){var a=e.checked,i=o.target,n=!!i.checked;if(Array.isArray(a)){var s=null,c=t._i(a,s);i.checked?c<0&&t.$set(e,"checked",a.concat([s])):c>-1&&t.$set(e,"checked",a.slice(0,c).concat(a.slice(c+1)))}else t.$set(e,"checked",n)}}}),o("v-icon",{staticClass:"icon removeItem",attrs:{name:"times",title:"Удалить"},on:{click:function(e){return t.deleteTodo(a)}}})],1)})),0),t._v(" "),o("div",{staticClass:"buttons"},[o("v-button",{staticClass:"addTodo",attrs:{title:"Добавить",icon:"plus"},on:{btnclick:t.addTodo}}),o("v-button",{staticClass:"create",attrs:{title:"Создать",icon:"plus"},on:{btnclick:t.createNote}}),o("v-button",{staticClass:"resetChanges",attrs:{title:"Сбросить",icon:"times",type:"cancel"},on:{btnclick:t.resetChanges}})],1)])])])},i=[],n=(o("a434"),o("b0c0"),o("5530")),s=o("2f62"),c=o("ebc8"),l=o("306c"),d={name:"v-create",data:function(){return{title:"Создание новой заметки",newNote:{id:null,title:"",todos:[{name:"",checked:!1}]}}},mixins:[c["a"],l["a"]],computed:Object(n["a"])({},Object(s["c"])({notes:function(t){return t.mNotes.notes}})),methods:Object(n["a"])({},Object(s["b"])(["ADD_NEW_NOTE"]),{refreshEndState:function(){var t=JSON.stringify(this.newNote);localStorage.setItem("endState",t)},addTodo:function(){this.newNote.todos.push({name:"",checked:!1}),this.refreshEndState()},deleteTodo:function(t){this.newNote.todos.splice(t,1),this.refreshEndState()},refreshData:function(){this.newNote.id=null,this.newNote.title="",this.newNote.todos=[{name:"",checked:!1}]},createNote:function(){if(this.newNote.title.length>0){this.removeEmptyFields(this.newNote.todos);for(var t=1,e=0;e<this.notes.length;e++)this.notes[e].id===t&&(t++,e=-1);this.newNote.id=t;var o={id:this.newNote.id,title:this.newNote.title,todos:this.newNote.todos};this.ADD_NEW_NOTE(o),this.refreshData(),this.updateDatabase(),this.$router.push({name:"home"})}},changeEndState:function(){var t=JSON.stringify(this.newNote);localStorage.setItem("endState",t)},undoTitle:function(){this.newNote.title=""},redoTitle:function(){this.endState=JSON.parse(localStorage.getItem("endState")),this.newNote.title=this.endState.title},undoItem:function(t){this.newNote.todos[t].name=""},redoItem:function(t){this.endState=JSON.parse(localStorage.getItem("endState")),this.newNote.todos[t].name=this.endState.todos[t].name},resetChanges:function(){this.refreshData()}}),mounted:function(){this.refreshEndState()}},r=d,u=(o("e769"),o("2877")),h=Object(u["a"])(r,a,i,!1,null,"33d15e88",null);e["a"]=h.exports},a434:function(t,e,o){"use strict";var a=o("23e7"),i=o("23cb"),n=o("a691"),s=o("50c4"),c=o("7b0b"),l=o("65f0"),d=o("8418"),r=o("1dde"),u=o("ae40"),h=r("splice"),m=u("splice",{ACCESSORS:!0,0:0,1:2}),v=Math.max,f=Math.min,N=9007199254740991,p="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!h||!m},{splice:function(t,e){var o,a,r,u,h,m,S=c(this),g=s(S.length),k=i(t,g),b=arguments.length;if(0===b?o=a=0:1===b?(o=0,a=g-k):(o=b-2,a=f(v(n(e),0),g-k)),g+o-a>N)throw TypeError(p);for(r=l(S,a),u=0;u<a;u++)h=k+u,h in S&&d(r,u,S[h]);if(r.length=a,o<a){for(u=k;u<g-a;u++)h=u+a,m=u+o,h in S?S[m]=S[h]:delete S[m];for(u=g;u>g-a+o;u--)delete S[u-1]}else if(o>a)for(u=g-a;u>k;u--)h=u+a-1,m=u+o-1,h in S?S[m]=S[h]:delete S[m];for(u=0;u<o;u++)S[u+k]=arguments[u+2];return S.length=g-a+o,r}})},e769:function(t,e,o){"use strict";var a=o("216c"),i=o.n(a);i.a},ebc8:function(t,e,o){"use strict";o("a434"),o("b0c0");e["a"]={methods:{removeEmptyFields:function(t){for(var e=0;e<t.length;e++)0===t[e].name.length&&(t.splice(e,1),e--)}}}},fd86:function(t,e,o){"use strict";var a=o("153f"),i=o.n(a);i.a}}]);
//# sourceMappingURL=chunk-515d8548.e96e2b10.js.map